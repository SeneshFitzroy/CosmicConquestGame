<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧪 COSMIC TEST LAB - Advanced Interactive Testing Suite</title>
    <style>
        :root {
            --primary-color: #00ff9f;
            --secondary-color: #ff0099;
            --accent-color: #9d00ff;
            --dark-bg: #0a0a0f;
            --darker-bg: #050508;
            --card-bg: rgba(20, 20, 40, 0.8);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --neon-glow: 0 0 20px currentColor;
            --text-gradient: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark-bg);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            cursor: none;
        }

        /* Advanced Background System */
        .cosmic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(157, 0, 255, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 159, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 0, 153, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
            z-index: -3;
        }

        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255, 255, 255, 0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255, 255, 255, 0.6), transparent),
                radial-gradient(2px 2px at 160px 30px, rgba(255, 255, 255, 0.8), transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: starTwinkle 4s ease-in-out infinite alternate;
            z-index: -2;
        }

        @keyframes starTwinkle {
            from { opacity: 0.6; }
            to { opacity: 1; }
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: var(--primary-color);
            border-radius: 50%;
            pointer-events: none;
            animation: floatUp 8s infinite ease-in-out;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Header Section */
        .header {
            text-align: center;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        .main-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            background: var(--text-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            animation: titlePulse 3s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(0, 255, 159, 0.5);
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 2rem;
            animation: subtitleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes subtitleGlow {
            from { text-shadow: 0 0 10px var(--primary-color); }
            to { text-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color); }
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        /* Test Grid */
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .test-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .test-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .test-card:hover::before {
            left: 100%;
        }

        .test-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 255, 159, 0.2);
        }

        .test-card h3 {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .test-card .icon {
            font-size: 2rem;
            animation: iconBounce 2s ease-in-out infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Advanced Button System */
        .cosmic-button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 50px;
            color: white;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            margin: 0.5rem;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(0, 255, 159, 0.3);
        }

        .cosmic-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .cosmic-button:hover::before {
            left: 100%;
        }

        .cosmic-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 255, 159, 0.5);
        }

        .cosmic-button:active {
            transform: translateY(0);
        }

        .test-button {
            background: linear-gradient(45deg, var(--accent-color), var(--secondary-color));
            box-shadow: 0 4px 15px rgba(157, 0, 255, 0.3);
        }

        .test-button:hover {
            background: linear-gradient(135deg, 
                var(--accent-color), 
                var(--primary-color), 
                var(--secondary-color));
            animation: testButtonGlow 0.3s ease forwards;
        }
        
        @keyframes testButtonGlow {
            0% { box-shadow: 0 6px 20px rgba(157, 0, 255, 0.4); }
            100% { 
                box-shadow: 
                    0 12px 35px rgba(157, 0, 255, 0.6),
                    inset 0 0 20px rgba(255, 255, 255, 0.1),
                    0 0 30px rgba(0, 255, 159, 0.3);
            }
        }

        /* Advanced Modal System */
        .cosmic-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .cosmic-modal.show {
            display: flex;
            opacity: 1;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            position: relative;
            transform: scale(0.7);
            transition: transform 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .cosmic-modal.show .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin: 0;
        }

        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-button:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }

        /* Status Dashboard */
        .status-dashboard {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .status-item {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .status-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }

        .status-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .status-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        /* Console Output */
        .console-output {
            background: var(--darker-bg);
            border: 1px solid var(--primary-color);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Courier New', monospace;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: inset 0 0 10px rgba(0, 255, 159, 0.2);
        }

        .console-line {
            margin: 0.25rem 0;
            color: var(--primary-color);
        }

        .console-line.success {
            color: #00ff00;
        }

        .console-line.error {
            color: #ff4444;
        }

        .console-line.info {
            color: #44aaff;
        }

        /* Progress Bars */
        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            padding: 3px;
            margin: 1rem 0;
        }

        .progress-bar {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 50px;
            height: 8px;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px currentColor;
        }

        /* Advanced Custom Cursor System */
        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, var(--accent-color), transparent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            mix-blend-mode: screen;
            transition: all 0.1s ease;
            filter: drop-shadow(0 0 12px var(--accent-color));
        }

        .custom-cursor::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            width: 40px;
            height: 40px;
            border: 2px solid var(--accent-color);
            border-radius: 50%;
            animation: testLabPulse 2s ease-in-out infinite;
            background: radial-gradient(circle, rgba(157, 0, 255, 0.1), transparent);
        }

        .custom-cursor::after {
            content: '';
            position: absolute;
            top: -16px;
            left: -16px;
            width: 52px;
            height: 52px;
            border: 1px solid rgba(157, 0, 255, 0.3);
            border-radius: 50%;
            animation: testLabScan 3s linear infinite;
        }

        @keyframes testLabPulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.4); opacity: 1; }
        }

        @keyframes testLabScan {
            0% { transform: rotate(0deg) scale(1); }
            100% { transform: rotate(360deg) scale(1.1); }
        }

        .custom-cursor.testing {
            transform: scale(1.8);
            background: radial-gradient(circle, var(--primary-color), transparent);
        }

        /* Enhanced Laboratory Particle System */
        .lab-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .test-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--accent-color);
            border-radius: 50%;
            animation: labFloat 12s linear infinite;
            box-shadow: 0 0 12px currentColor;
        }

        @keyframes labFloat {
            0% {
                transform: translateY(100vh) translateX(0) scale(0) rotate(0deg);
                opacity: 0;
                background: var(--accent-color);
            }
            10% {
                opacity: 1;
                transform: translateY(90vh) translateX(0) scale(1) rotate(0deg);
            }
            30% {
                background: var(--primary-color);
                transform: translateY(70vh) translateX(var(--random-x)) scale(1.3) rotate(120deg);
            }
            60% {
                background: var(--secondary-color);
                transform: translateY(40vh) translateX(var(--random-x)) scale(1.6) rotate(240deg);
            }
            90% {
                opacity: 1;
                transform: translateY(10vh) translateX(var(--random-x)) scale(1) rotate(360deg);
            }
            100% {
                transform: translateY(-10vh) translateX(var(--random-x)) scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        /* Enhanced Test Lab Animation Keyframes */
        @keyframes testTrailFade {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.3); }
        }
        
        @keyframes testExplosion {
            0% { 
                opacity: 1; 
                transform: translate(0, 0) scale(1); 
            }
            100% { 
                opacity: 0; 
                transform: translate(var(--explosion-x), var(--explosion-y)) scale(0.2); 
            }
        }
        
        @keyframes testScanMove {
            0% { opacity: 0; transform: scaleX(0); }
            50% { opacity: 1; transform: scaleX(1); }
            100% { opacity: 0; transform: scaleX(0); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .test-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .main-title {
                font-size: 2.5rem;
            }
        }

        /* Loading Animation */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin-left: 0.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--primary-color);
            border-radius: 10px;
            padding: 1rem;
            max-width: 300px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 2000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-color: #00ff00;
        }

        .notification.error {
            border-color: #ff4444;
        }
    </style>
</head>
<body>
    <div class="custom-cursor" id="cursor"></div>
    <div class="lab-particles" id="labParticles"></div>
    <div class="cosmic-background"></div>
    <div class="starfield"></div>
    <div class="floating-particles" id="particles"></div>

    <div class="header">
        <h1 class="main-title">🧪 COSMIC TEST LAB</h1>
        <p class="subtitle">Advanced Interactive Testing Suite & Component Validation</p>
    </div>

    <div class="container">
        <!-- Status Dashboard -->
        <div class="status-dashboard">
            <h2 style="color: var(--primary-color); margin-bottom: 1rem;">🚀 System Status</h2>
            <div class="status-grid">
                <div class="status-item">
                    <div class="status-value" id="testsRun">0</div>
                    <div class="status-label">Tests Executed</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="testsSuccess">0</div>
                    <div class="status-label">Successful</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="testsFailed">0</div>
                    <div class="status-label">Failed</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="systemUptime">00:00</div>
                    <div class="status-label">Uptime</div>
                </div>
            </div>
        </div>

        <!-- Test Grid -->
        <div class="test-grid">
            <!-- Modal Tests -->
            <div class="test-card">
                <h3><span class="icon">🪟</span> Modal Systems</h3>
                <p>Test advanced modal dialogs with animations and interactivity.</p>
                <button class="cosmic-button test-button" onclick="testLab.showModal('basicModal')">
                    Basic Modal Test
                </button>
                <button class="cosmic-button test-button" onclick="testLab.showModal('advancedModal')">
                    Advanced Modal Test
                </button>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%" id="modalProgress"></div>
                </div>
            </div>

            <!-- Button Tests -->
            <div class="test-card">
                <h3><span class="icon">🎛️</span> Button Systems</h3>
                <p>Validate button functionality, animations, and event handling.</p>
                <button class="cosmic-button" onclick="testLab.testButton('standard')">
                    Standard Button
                </button>
                <button class="cosmic-button test-button" onclick="testLab.testButton('special')">
                    Special Button
                </button>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%" id="buttonProgress"></div>
                </div>
            </div>

            <!-- Animation Tests -->
            <div class="test-card">
                <h3><span class="icon">✨</span> Animation Engine</h3>
                <p>Test CSS animations, transitions, and visual effects.</p>
                <button class="cosmic-button" onclick="testLab.testAnimation('pulse')">
                    Pulse Animation
                </button>
                <button class="cosmic-button test-button" onclick="testLab.testAnimation('glow')">
                    Glow Effect
                </button>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%" id="animationProgress"></div>
                </div>
            </div>

            <!-- Audio Tests -->
            <div class="test-card">
                <h3><span class="icon">🔊</span> Audio System</h3>
                <p>Test sound effects, music, and audio feedback systems.</p>
                <button class="cosmic-button" onclick="testLab.testAudio('click')">
                    Click Sound
                </button>
                <button class="cosmic-button test-button" onclick="testLab.testAudio('success')">
                    Success Sound
                </button>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%" id="audioProgress"></div>
                </div>
            </div>

            <!-- Data Tests -->
            <div class="test-card">
                <h3><span class="icon">💾</span> Data Storage</h3>
                <p>Validate localStorage, data persistence, and retrieval.</p>
                <button class="cosmic-button" onclick="testLab.testStorage('save')">
                    Save Data
                </button>
                <button class="cosmic-button test-button" onclick="testLab.testStorage('load')">
                    Load Data
                </button>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%" id="storageProgress"></div>
                </div>
            </div>

            <!-- Performance Tests -->
            <div class="test-card">
                <h3><span class="icon">⚡</span> Performance</h3>
                <p>Monitor rendering performance and system responsiveness.</p>
                <button class="cosmic-button" onclick="testLab.testPerformance('render')">
                    Render Test
                </button>
                <button class="cosmic-button test-button" onclick="testLab.testPerformance('stress')">
                    Stress Test
                </button>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%" id="performanceProgress"></div>
                </div>
            </div>
        </div>

        <!-- Console Output -->
        <div class="console-output" id="consoleOutput">
            <div class="console-line success">🚀 Cosmic Test Lab initialized successfully</div>
            <div class="console-line info">💡 Ready to run tests - click any button to begin</div>
        </div>
    </div>

    <!-- Advanced Modals -->
    <div id="basicModal" class="cosmic-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🔬 Basic Modal Test</h3>
                <button class="close-button" onclick="testLab.closeModal('basicModal')">&times;</button>
            </div>
            <p>This is a basic modal test. The modal system is working correctly!</p>
            <p>Features tested:</p>
            <ul style="margin: 1rem 0; padding-left: 2rem;">
                <li>Modal display/hide functionality</li>
                <li>Backdrop blur effects</li>
                <li>Smooth animations</li>
                <li>Click outside to close</li>
            </ul>
            <button class="cosmic-button" onclick="testLab.closeModal('basicModal')">
                ✅ Test Passed
            </button>
        </div>
    </div>

    <div id="advancedModal" class="cosmic-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🧬 Advanced Modal Test</h3>
                <button class="close-button" onclick="testLab.closeModal('advancedModal')">&times;</button>
            </div>
            <p>Advanced modal with enhanced features and interactivity.</p>
            
            <div style="margin: 1rem 0;">
                <label style="display: block; margin-bottom: 0.5rem;">Test Input:</label>
                <input type="text" placeholder="Enter test data..." style="width: 100%; padding: 0.5rem; border: 1px solid var(--primary-color); border-radius: 5px; background: rgba(255,255,255,0.1); color: white;">
            </div>
            
            <div style="margin: 1rem 0;">
                <label style="display: block; margin-bottom: 0.5rem;">Test Options:</label>
                <select style="width: 100%; padding: 0.5rem; border: 1px solid var(--primary-color); border-radius: 5px; background: rgba(255,255,255,0.1); color: white;">
                    <option>Option 1: Standard Test</option>
                    <option>Option 2: Advanced Test</option>
                    <option>Option 3: Stress Test</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button class="cosmic-button" onclick="testLab.runAdvancedTest()">
                    🚀 Run Test
                </button>
                <button class="cosmic-button test-button" onclick="testLab.closeModal('advancedModal')">
                    ❌ Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <div style="position: fixed; bottom: 20px; left: 20px; z-index: 100;">
        <button class="cosmic-button" onclick="window.location.href='ULTIMATE-INDEX.html'">
            🏠 Home
        </button>
        <button class="cosmic-button" onclick="window.location.href='ULTRA-COSMIC-CONQUEST.html'">
            🎮 Game
        </button>
        <button class="cosmic-button" onclick="window.location.href='ULTIMATE-LEADERBOARD.html'">
            🏆 Leaderboard
        </button>
    </div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <script>
        class CosmicTestLab {
            constructor() {
                this.stats = {
                    testsRun: 0,
                    testsSuccess: 0,
                    testsFailed: 0,
                    startTime: Date.now()
                };
                this.audioContext = null;
                this.init();
            }

            init() {
                this.setupCursor();
                this.createLabParticles();
                this.createParticles();
                this.updateUptime();
                this.setupAudio();
                this.log('🔧 All systems online and ready for testing', 'success');
            }

            setupCursor() {
                const cursor = document.getElementById('cursor');

                document.addEventListener('mousemove', (e) => {
                    cursor.style.left = e.clientX + 'px';
                    cursor.style.top = e.clientY + 'px';
                    
                    // Create test trail particles
                    if (Math.random() < 0.3) {
                        this.createTestTrail(e.clientX, e.clientY);
                    }
                });

                document.addEventListener('mousedown', () => {
                    cursor.style.transform = 'scale(0.8)';
                    this.createTestExplosion(event.clientX, event.clientY);
                });

                document.addEventListener('mouseup', () => {
                    cursor.style.transform = 'scale(1)';
                });

                // Enhanced hover effects for test elements
                document.querySelectorAll('button, .test-button').forEach(element => {
                    element.addEventListener('mouseenter', () => {
                        cursor.classList.add('testing');
                        this.createTestScanLines(element);
                    });
                    
                    element.addEventListener('mouseleave', () => {
                        cursor.classList.remove('testing');
                    });
                });
            }

            createLabParticles() {
                const container = document.getElementById('labParticles');
                const colors = ['var(--accent-color)', 'var(--primary-color)', 'var(--secondary-color)'];
                
                for (let i = 0; i < 35; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'test-particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.setProperty('--random-x', (Math.random() - 0.5) * 350 + 'px');
                    particle.style.animationDelay = Math.random() * 12 + 's';
                    particle.style.animationDuration = (10 + Math.random() * 4) + 's';
                    container.appendChild(particle);
                }

                // Continuously regenerate test particles
                setInterval(() => {
                    if (container.children.length < 45) {
                        const particle = document.createElement('div');
                        particle.className = 'test-particle';
                        particle.style.left = Math.random() * 100 + '%';
                        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                        particle.style.setProperty('--random-x', (Math.random() - 0.5) * 350 + 'px');
                        particle.style.animationDuration = (10 + Math.random() * 4) + 's';
                        container.appendChild(particle);

                        setTimeout(() => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                        }, 14000);
                    }
                }, 700);
            }

            createTestTrail(x, y) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: fixed;
                    left: ${x - 2}px;
                    top: ${y - 2}px;
                    width: 4px;
                    height: 4px;
                    background: var(--accent-color);
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 9999;
                    animation: testTrailFade 1s ease-out forwards;
                    box-shadow: 0 0 10px var(--accent-color);
                `;
                document.body.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 1000);
            }

            createTestExplosion(x, y) {
                for (let i = 0; i < 12; i++) {
                    const explosion = document.createElement('div');
                    const angle = (i * 30) * (Math.PI / 180);
                    const distance = 40 + Math.random() * 40;
                    
                    explosion.style.cssText = `
                        position: fixed;
                        left: ${x - 3}px;
                        top: ${y - 3}px;
                        width: 6px;
                        height: 6px;
                        background: var(--primary-color);
                        border-radius: 50%;
                        pointer-events: none;
                        z-index: 9998;
                        animation: testExplosion 1s ease-out forwards;
                        --explosion-x: ${Math.cos(angle) * distance}px;
                        --explosion-y: ${Math.sin(angle) * distance}px;
                        box-shadow: 0 0 12px var(--primary-color);
                    `;
                    document.body.appendChild(explosion);
                    
                    setTimeout(() => {
                        if (explosion.parentNode) {
                            explosion.parentNode.removeChild(explosion);
                        }
                    }, 1000);
                }
            }

            createTestScanLines(element) {
                const rect = element.getBoundingClientRect();
                for (let i = 0; i < 8; i++) {
                    setTimeout(() => {
                        const scanLine = document.createElement('div');
                        scanLine.style.cssText = `
                            position: fixed;
                            left: ${rect.left}px;
                            top: ${rect.top + (i * rect.height / 8)}px;
                            width: ${rect.width}px;
                            height: 1px;
                            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
                            pointer-events: none;
                            z-index: 1000;
                            animation: testScanMove 0.6s ease-out forwards;
                        `;
                        document.body.appendChild(scanLine);
                        
                        setTimeout(() => {
                            if (scanLine.parentNode) {
                                scanLine.parentNode.removeChild(scanLine);
                            }
                        }, 600);
                    }, i * 60);
                }
            }

            createParticles() {
                const container = document.getElementById('particles');
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.style.left = Math.random() * 100 + '%';
                        particle.style.width = Math.random() * 4 + 1 + 'px';
                        particle.style.height = particle.style.width;
                        particle.style.animationDelay = Math.random() * 8 + 's';
                        particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                        container.appendChild(particle);
                    }, i * 200);
                }
            }

            setupAudio() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    this.log('⚠️ Audio context not available', 'error');
                }
            }

            playTone(frequency = 440, duration = 200, type = 'sine') {
                if (!this.audioContext) return;

                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration / 1000);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + duration / 1000);
            }

            updateStats() {
                document.getElementById('testsRun').textContent = this.stats.testsRun;
                document.getElementById('testsSuccess').textContent = this.stats.testsSuccess;
                document.getElementById('testsFailed').textContent = this.stats.testsFailed;
            }

            updateUptime() {
                const updateTime = () => {
                    const elapsed = Date.now() - this.stats.startTime;
                    const minutes = Math.floor(elapsed / 60000);
                    const seconds = Math.floor((elapsed % 60000) / 1000);
                    document.getElementById('systemUptime').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                };
                updateTime();
                setInterval(updateTime, 1000);
            }

            log(message, type = 'info') {
                const console = document.getElementById('consoleOutput');
                const line = document.createElement('div');
                line.className = `console-line ${type}`;
                line.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
                console.appendChild(line);
                console.scrollTop = console.scrollHeight;
            }

            showNotification(message, type = 'info') {
                const notification = document.getElementById('notification');
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span>${type === 'success' ? '✅' : type === 'error' ? '❌' : 'ℹ️'}</span>
                        <span>${message}</span>
                    </div>
                `;
                notification.className = `notification ${type} show`;
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            updateProgress(type, percentage) {
                const progressBar = document.getElementById(`${type}Progress`);
                if (progressBar) {
                    progressBar.style.width = percentage + '%';
                }
            }

            showModal(modalId) {
                this.log(`🪟 Opening modal: ${modalId}`, 'info');
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('show');
                    this.stats.testsRun++;
                    this.updateStats();
                    this.updateProgress('modal', 50);
                    this.playTone(800, 150);
                }

                // Click outside to close
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        this.closeModal(modalId);
                    }
                });
            }

            closeModal(modalId) {
                this.log(`❌ Closing modal: ${modalId}`, 'info');
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('show');
                    this.stats.testsSuccess++;
                    this.updateStats();
                    this.updateProgress('modal', 100);
                    this.playTone(600, 100);
                    this.showNotification('Modal test completed successfully!', 'success');
                }
            }

            testButton(type) {
                this.log(`🎛️ Testing button: ${type}`, 'info');
                this.stats.testsRun++;
                this.updateStats();
                this.updateProgress('button', 75);
                
                const frequencies = { standard: 440, special: 880 };
                this.playTone(frequencies[type] || 440, 200);
                
                setTimeout(() => {
                    this.stats.testsSuccess++;
                    this.updateStats();
                    this.updateProgress('button', 100);
                    this.showNotification(`${type} button test passed!`, 'success');
                }, 500);
            }

            testAnimation(type) {
                this.log(`✨ Testing animation: ${type}`, 'info');
                this.stats.testsRun++;
                this.updateStats();
                this.updateProgress('animation', 60);

                const testElement = document.createElement('div');
                testElement.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 100px;
                    height: 100px;
                    background: var(--primary-color);
                    border-radius: 50%;
                    z-index: 2000;
                    pointer-events: none;
                `;

                if (type === 'pulse') {
                    testElement.style.animation = 'titlePulse 1s ease-in-out 3';
                } else if (type === 'glow') {
                    testElement.style.boxShadow = '0 0 50px var(--primary-color)';
                    testElement.style.animation = 'subtitleGlow 1s ease-in-out 3';
                }

                document.body.appendChild(testElement);
                this.playTone(660, 300);

                setTimeout(() => {
                    document.body.removeChild(testElement);
                    this.stats.testsSuccess++;
                    this.updateStats();
                    this.updateProgress('animation', 100);
                    this.showNotification(`${type} animation test completed!`, 'success');
                }, 3000);
            }

            testAudio(type) {
                this.log(`🔊 Testing audio: ${type}`, 'info');
                this.stats.testsRun++;
                this.updateStats();
                this.updateProgress('audio', 80);

                const sounds = {
                    click: { freq: 800, duration: 100 },
                    success: { freq: 523, duration: 300 }
                };

                const sound = sounds[type] || sounds.click;
                this.playTone(sound.freq, sound.duration);

                setTimeout(() => {
                    this.stats.testsSuccess++;
                    this.updateStats();
                    this.updateProgress('audio', 100);
                    this.showNotification(`${type} audio test successful!`, 'success');
                }, 500);
            }

            testStorage(operation) {
                this.log(`💾 Testing storage: ${operation}`, 'info');
                this.stats.testsRun++;
                this.updateStats();
                this.updateProgress('storage', 70);

                try {
                    if (operation === 'save') {
                        const testData = {
                            timestamp: Date.now(),
                            testId: Math.random().toString(36).substr(2, 9),
                            status: 'success'
                        };
                        localStorage.setItem('cosmicTestData', JSON.stringify(testData));
                        this.playTone(700, 150);
                    } else if (operation === 'load') {
                        const data = localStorage.getItem('cosmicTestData');
                        if (data) {
                            JSON.parse(data);
                            this.playTone(600, 150);
                        } else {
                            throw new Error('No test data found');
                        }
                    }

                    setTimeout(() => {
                        this.stats.testsSuccess++;
                        this.updateStats();
                        this.updateProgress('storage', 100);
                        this.showNotification(`Storage ${operation} test passed!`, 'success');
                    }, 300);
                } catch (error) {
                    this.stats.testsFailed++;
                    this.updateStats();
                    this.showNotification(`Storage test failed: ${error.message}`, 'error');
                    this.log(`❌ Storage test failed: ${error.message}`, 'error');
                }
            }

            testPerformance(type) {
                this.log(`⚡ Testing performance: ${type}`, 'info');
                this.stats.testsRun++;
                this.updateStats();
                this.updateProgress('performance', 90);

                const startTime = performance.now();

                if (type === 'render') {
                    // Create multiple elements to test rendering
                    const elements = [];
                    for (let i = 0; i < 100; i++) {
                        const el = document.createElement('div');
                        el.style.cssText = `
                            position: absolute;
                            width: 10px;
                            height: 10px;
                            background: var(--primary-color);
                            left: ${Math.random() * window.innerWidth}px;
                            top: ${Math.random() * window.innerHeight}px;
                            pointer-events: none;
                            z-index: 1500;
                        `;
                        document.body.appendChild(el);
                        elements.push(el);
                    }

                    setTimeout(() => {
                        elements.forEach(el => document.body.removeChild(el));
                        const endTime = performance.now();
                        const duration = endTime - startTime;
                        
                        this.stats.testsSuccess++;
                        this.updateStats();
                        this.updateProgress('performance', 100);
                        this.playTone(750, 200);
                        this.showNotification(`Render test: ${duration.toFixed(2)}ms`, 'success');
                    }, 1000);
                } else if (type === 'stress') {
                    // CPU stress test
                    let iterations = 0;
                    const stressTest = () => {
                        for (let i = 0; i < 10000; i++) {
                            Math.random() * Math.random();
                        }
                        iterations++;
                        if (iterations < 100) {
                            requestAnimationFrame(stressTest);
                        } else {
                            const endTime = performance.now();
                            const duration = endTime - startTime;
                            
                            this.stats.testsSuccess++;
                            this.updateStats();
                            this.updateProgress('performance', 100);
                            this.playTone(850, 250);
                            this.showNotification(`Stress test: ${duration.toFixed(2)}ms`, 'success');
                        }
                    };
                    requestAnimationFrame(stressTest);
                }
            }

            runAdvancedTest() {
                this.log('🧬 Running advanced test suite...', 'info');
                this.playTone(1000, 300);
                
                const tests = ['modal', 'button', 'animation', 'audio', 'storage'];
                tests.forEach((test, index) => {
                    setTimeout(() => {
                        this.updateProgress(test, 100);
                    }, (index + 1) * 200);
                });

                setTimeout(() => {
                    this.closeModal('advancedModal');
                    this.showNotification('Advanced test suite completed!', 'success');
                }, 1500);
            }
        }

        // Initialize the test lab
        const testLab = new CosmicTestLab();

        // Add some easter eggs
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                // Close all modals
                document.querySelectorAll('.cosmic-modal').forEach(modal => {
                    modal.classList.remove('show');
                });
            }
        });

        // Konami code easter egg
        let konamiCode = [];
        const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];
        
        document.addEventListener('keydown', (e) => {
            konamiCode.push(e.code);
            if (konamiCode.length > konamiSequence.length) {
                konamiCode.shift();
            }
            
            if (JSON.stringify(konamiCode) === JSON.stringify(konamiSequence)) {
                testLab.log('🎮 Konami code activated! Easter egg unlocked!', 'success');
                testLab.showNotification('🎉 Easter egg found! You are a true gamer!', 'success');
                testLab.playTone(523, 200);
                setTimeout(() => testLab.playTone(659, 200), 200);
                setTimeout(() => testLab.playTone(784, 400), 400);
                konamiCode = [];
            }
        });
    </script>
</body>
</html>
